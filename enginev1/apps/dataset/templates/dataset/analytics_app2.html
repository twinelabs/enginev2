{% load staticfiles %}

<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="dashApp" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="dashApp" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="dashApp" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="dashApp" class="no-js"> <!--<![endif]-->
<html lang="en" ng-app="dashApp">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Twine Labs Dashboard</title>

    <link href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-grid/3.2.6/ui-grid.min.css" rel="stylesheet"/>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"/>

    <link type="text/css" href="{% static "css/styles.min.css" %}" rel="stylesheet">

</head>


<body ng-app="{% block ng_app %}dashApp{% endblock %}">
<div class="content" ng-controller="{% block ng_controller %}dashCtrl{% endblock %}">

{% verbatim %}

  <div class="dashboard">

    <div class="row">
      <div class="col col-md-12">
        <div class="section section-top-table">

          <div class="title">Select Data Set</div>

          <div class="row">
            <div class="col col-md-12">
              <div class="btn btn-default btn-lg" ng-repeat="t in tables track by t.id"
                   ng-class="{ active: t.id == selectedTable.id }"
                   ng-click="selectedTable = t"
              ><div>{{ t.name }}</div><div class="count">{{t.data.length}}</div></div>
              <!--<select-->
                  <!--name="tableSelect"-->
                  <!--ng-model="selectedTable"-->
                  <!--ng-options="option.name for option in tables track by option.id"-->
              <!--&gt;</select>-->
            </div>
          </div>

        </div>
        <div class="section section-top-view">

          <div class="title">Select View</div>

          <div class="row">
            <div class="col col-md-12">
              <div class="view" ng-repeat="v in views track by v.id"
                   ng-class="{ active: v.id == selectedView.id }"
                   ng-click="selectedView = v"
              ><a href="">{{ v.name }}</a></div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <div class="row">

      <div class="col col-md-3">
        <div class="section section-left">

          <div class="title">Tables & Data Fields</div>

          <ul>
            <li class="types" ng-repeat="t in getFieldTypes() track by $index">

              <span class="arrow" ng-class="{ open: dataFieldsByType[t].open }"></span>
              <div class="typeName" ng-click="dataFieldsByType[t].open = !dataFieldsByType[t].open">
                {{ dataFieldsByType[t].name }}
              </div>

              <ul class="fieldList" ng-class="{ open: dataFieldsByType[t].open }">
                <li class="fields" ng-repeat="f in dataFieldsByType[t].fields track by $index"
                     ng-class="{ active: f == selectedDataField }"
                     ng-click="selectedDataField = f"
                >{{ f }}</li>
              </ul>

            </li>
          </ul>

        </div>
      </div>

      <div class="col col-md-9">

        <div class="section section-right" ng-if="selectedView.id == 1">

          <div class="title"> Chart {{ selectedDataField ? ' &dash; ' + selectedDataField : '' }}</div>

          <div class="chart-container">
            <div ng-if="showGrid" class="controls">

              <div class="sort">
                <span>sort: </span>
                <div class="view" ng-repeat="c in chartControlSort track by c.id"
                     ng-class="{ active: c.id == selectedChartControlSort.id }"
                     ng-click="selectedChartControlSort = c"
                ><a href="">{{ c.name }}</a></div>
              </div>

              <div class="scale">
                <span>scale: </span>
                <div class="view" ng-repeat="c in chartControlScale track by c.id"
                     ng-class="{ active: c.id == selectedChartControlScale.id }"
                     ng-click="selectedChartControlScale = c"
                ><a href="">{{ c.name }}</a></div>
              </div>

            </div>

            <div id="chart"></div>

            <div ng-if="showGrid" class="dropdown">
              <button class="dropbtn">Export</button>
              <div class="dropdown-content">
                <a href="" ng-click="click('png', $event)">PNG</a>
                <a href="" ng-click="click('pdf', $event)">PDF</a>
              </div>
            </div>

          </div>


          <div class="grid-container">
            <div ng-if="showGrid" ui-grid="gridOptions" class="grid"></div>

            <div ng-if="showGrid" class="dropdown">
              <button class="dropbtn">Export</button>
              <div class="dropdown-content">
                <a href="" ng-click="click('csv', $event)">CSV</a>
                <a href="" ng-click="click('json', $event)">JSON</a>
              </div>
            </div>

          </div>

        </div>

        <div class="section section-right" ng-if="selectedView.id == 0">
          <div class="title"> Summary </div>
        </div>

        <div class="section section-right" ng-if="selectedView.id == 2">
          <div class="title"> Statistics </div>
        </div>

      </div>

    </div>

  </div>

{% endverbatim %}
</div>


  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-grid/3.2.6/ui-grid.min.js"></script>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src="{% static "scripts/analytics_app.js" %}"></script>


</body>
</html>